{% extends "base.html" %}

{% block content %}
  
  <div class="container border border-dark bg-light rounded-top">
    <h1 class="pt-2">Add new board game Winner!</h1>
    <hr></hr>
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <form method="POST">
          {{ board_games_winner_form.csrf_token }}
          <div class="mb-3">
            {{ board_games_winner_form.dow.label(class="form-control-label") }}
            {{ board_games_winner_form.dow(class="form-control DateTimeField") }}
          </div>
          <div class="mb-3">
            {{ board_games_winner_form.winner.label(class="form-control-label") }}
            {{ board_games_winner_form.winner(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ board_games_winner_form.game.label(class="form-control-label") }}
            {{ board_games_winner_form.game(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ board_games_winner_form.points.label(class="form-control-label") }}
            {{ board_games_winner_form.points(class="form-control") }}
          </div>
          <button type="submit" class="btn btn-primary m-4">Add Winner</button>
        </form>
      </div>
    </div>
  </div>

  <div class="container mt-5 border border-dark bg-light rounded-top">
    <h1 class="pt-2">Games Timeline</h1>
    <div id="timeline" class="mt-4"></div>
    <div class="text-center">
      <button id="loadMoreBtn" class="btn btn-primary m-4">Load More</button>
    </div>
  </div>

{% endblock %}

{% block javascriptCode %}

<script>
  var startDate = new Date();
  var endDate = new Date();
  startDate.setDate(endDate.getDate() - 14);

  loadTimeline(startDate, endDate, ['games']);

  $('#loadMoreBtn').on('click', function () {
      startDate.setDate(startDate.getDate() - 14);
      loadTimeline(startDate, endDate, ['games']);
  });

</script>

{% endblock javascriptCode %}